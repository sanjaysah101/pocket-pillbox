<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pocket Pillbox</title>
    <style>
        /* Reset */
        html {
            box-sizing: border-box;
            font-size: 18px;
            background: #f8fafc;
        }

        *,
        *:before,
        *:after {
            box-sizing: inherit;
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            margin: 0;
            color: #222;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        header {
            margin-top: 1.5rem;
            margin-bottom: 0.5rem;
            font-size: 2.1rem;
            font-weight: bold;
            color: #057fa3;
            text-align: center;
        }

        main {
            width: 100%;
            max-width: 440px;
            background: #fff;
            border-radius: 1rem;
            box-shadow: 0 4px 18px rgba(0, 0, 0, 0.10);
            padding: 1.5rem 1.2rem 2.5rem 1.2rem;
            margin-bottom: 2rem;
        }

        form {
            margin-bottom: 1.5rem;
        }

        fieldset {
            border: 2px solid #cbe0fb;
            border-radius: 0.75em;
            padding: 1em;
            margin: 0;
            background: #eaf7ff;
        }

        legend {
            font-weight: bold;
            color: #036ba2;
            font-size: 1.12em;
        }

        label {
            display: block;
            margin: 0.4em 0 0.7em 0;
            font-size: 1em;
        }

        input[type="text"],
        input[type="time"] {
            font-size: 1em;
            padding: 0.4em 0.6em;
            margin-left: 0.6em;
            border: 2px solid #b7dfff;
            border-radius: 0.4em;
            outline: none;
            width: 74%;
            max-width: 210px;
            transition: border-color 0.2s;
            background: #f6fcff;
        }

        input:focus {
            border-color: #1076ba;
            background: #e5f4ff;
        }

        button {
            font-size: 1em;
            padding: 0.6em 1em;
            background-color: #057fa3;
            color: #fff;
            border: none;
            border-radius: 0.5em;
            cursor: pointer;
            margin-top: 0.5em;
            margin-bottom: 0.2em;
            transition: background 0.2s, box-shadow 0.2s;
            box-shadow: 0 2px 6px rgba(5, 127, 163, 0.15);
        }

        button:focus,
        button:hover {
            background: #045e7a;
            outline: none;
        }

        #clear-all {
            background: #d42323;
            margin-top: 1.1em;
            font-size: 0.98em;
        }

        #clear-all:focus,
        #clear-all:hover {
            background: #b11414;
        }

        section#reminders-section {
            margin-top: 1.5em;
        }

        h2 {
            font-size: 1.23em;
            margin-bottom: 0.6em;
            color: #2479bb;
        }

        ul#reminders-list {
            padding: 0;
            list-style: none;
            margin-bottom: 0.6em;
            min-height: 2.2em;
        }

        .reminder-item {
            display: flex;
            align-items: center;
            background: #f3faff;
            border: 1.5px solid #b1dafd;
            border-radius: 0.45em;
            margin-bottom: 0.57em;
            padding: 0.7em 0.8em 0.7em 0.55em;
            font-size: 1.09em;
            transition: background 0.15s;
        }

        .reminder-item.checked {
            background: #dfa;
            opacity: 0.65;
            text-decoration: line-through;
        }

        .reminder-checkbox {
            accent-color: #057fa3;
            width: 1.3em;
            height: 1.3em;
            margin-right: 0.7em;
            cursor: pointer;
        }

        .reminder-info {
            flex: 1;
        }

        .reminder-time {
            color: #158034;
            font-size: 0.96em;
            margin-left: 0.6em;
        }

        @media (max-width: 600px) {
            main {
                padding: 1.1rem 0.5rem 1.8rem 0.5rem;
            }

            html {
                font-size: 16px;
            }
        }
    </style>
</head>

<body>
    <header>
        <h1>ðŸ©º Pocket Pillbox</h1>
    </header>

    <main id="app-container">
        <!-- ADD REMINDER FORM -->
        <form id="pill-form" autocomplete="off" aria-label="Add a daily medication reminder">
            <fieldset>
                <legend>ðŸ’Š Add Medication</legend>
                <label>
                    Name:
                    <input type="text" id="pill-name" required maxlength="32" autocomplete="off" aria-label="Pill name">
                </label>
                <label>
                    Dosage:
                    <input type="text" id="pill-dosage" maxlength="16" placeholder="e.g. 5mg" aria-label="Dosage">
                </label>
                <label>
                    Time:
                    <input type="time" id="pill-time" aria-label="Time to take">
                </label>
                <button type="submit" id="add-btn">Add Reminder</button>
            </fieldset>
        </form>

        <!-- REMINDERS LIST -->
        <section id="reminders-section" aria-label="Todayâ€™s medications">
            <h2>Todayâ€™s Medications</h2>
            <ul id="reminders-list">
                <!-- JavaScript will populate reminders here -->
            </ul>
            <button id="clear-all" type="button" aria-label="Clear all reminders">Clear All Reminders</button>
        </section>
    </main>

    <script>
        // --- Pocket Pillbox Core Logic ---
        const FORM = document.getElementById('pill-form');
        const NAME = document.getElementById('pill-name');
        const DOSAGE = document.getElementById('pill-dosage');
        const TIME = document.getElementById('pill-time');
        const LIST = document.getElementById('reminders-list');
        const CLEAR = document.getElementById('clear-all');

        // Use a unique key to avoid conflict in localStorage
        const STORAGE_KEY = 'pocket-pillbox-reminders-v1';

        // Reminder format: { id, name, dosage, time, taken }

        let reminders = loadReminders();
        renderReminders();

        // --- Form Submission ---
        FORM.addEventListener('submit', function (e) {
            e.preventDefault();
            const name = NAME.value.trim();
            if (!name) return;

            const reminder = {
                id: Date.now(), // unique key
                name,
                dosage: DOSAGE.value.trim(),
                time: TIME.value,
                taken: false
            };

            reminders.push(reminder);
            saveReminders();
            renderReminders();
            FORM.reset();
            NAME.focus();
        });

        // --- Mark As Taken ---
        LIST.addEventListener('change', function (e) {
            if (e.target.classList.contains('reminder-checkbox')) {
                const id = Number(e.target.dataset.id);
                const found = reminders.find(r => r.id === id);
                if (found) {
                    found.taken = e.target.checked;
                    saveReminders();
                    renderReminders();
                }
            }
        });

        // --- Clear All Reminders ---
        CLEAR.addEventListener('click', function () {
            if (confirm('Clear all reminders?')) {
                reminders = [];
                saveReminders();
                renderReminders();
            }
        });

        // --- Load from LocalStorage ---
        function loadReminders() {
            try {
                return JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
            } catch {
                return [];
            }
        }

        // --- Save to LocalStorage ---
        function saveReminders() {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(reminders));
        }

        // --- Render Reminders List ---
        function renderReminders() {
            LIST.innerHTML = '';
            if (reminders.length === 0) {
                LIST.innerHTML = '<li style="color:#888; font-size:1em;">No reminders set yet.</li>';
                return;
            }
            reminders.forEach(reminder => {
                const li = document.createElement('li');
                li.className = 'reminder-item' + (reminder.taken ? ' checked' : '');
                // Checkbox
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.className = 'reminder-checkbox';
                checkbox.dataset.id = reminder.id;
                checkbox.checked = reminder.taken;
                checkbox.setAttribute('aria-label', `Mark ${reminder.name} as taken`);
                // Info span: name, dosage, time
                const info = document.createElement('span');
                info.className = 'reminder-info';
                info.textContent = `${reminder.name}` + (reminder.dosage ? ` (${reminder.dosage})` : '');
                // Time, if provided
                const time = reminder.time ? ` | ðŸ•‘ ${reminder.time}` : '';
                const timeSpan = document.createElement('span');
                timeSpan.className = 'reminder-time';
                timeSpan.textContent = time;
                // Build item
                li.appendChild(checkbox);
                li.appendChild(info);
                if (reminder.time) {
                    li.appendChild(timeSpan);
                }
                LIST.appendChild(li);
            });
        }
    </script>
</body>

</html>